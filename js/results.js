var today=new Date,updateJSON={},dateRef="xphistory."+[String(today.getMonth()+1).padStart(2,"0"),String(today.getDate()).padStart(2,"0"),today.getFullYear()].join("-");function pad2(e){return(e<10?"0":"")+e}param=new URLSearchParams(window.location.search),results={correct:param.get("correct"),total:param.get("total"),duration:parseInt(param.get("duration"))},Object.values(results).includes(null)&&(window.location.href="./"),history.replaceState({},"","results.html"),console.log(results),$("#total .result-number").text(results.total);let percentage_correct=parseInt(results.correct/results.total*100);function startApp(){return new Promise((function(e,t){if(0!=parseInt(results.correct)&&parseInt(results.correct)/1==parseInt(results.correct)){console.log("adding to goals");let e=firebase.firestore.FieldValue.increment(parseInt(results.correct));updateJSON[dateRef]=e,userDoc().update(updateJSON,{merge:!0}).then(()=>{console.log("added to xp")})}else console.log("invalid data");e()}))}percentage_correct="NaN"==percentage_correct.toString()?"-":percentage_correct,$("#correct .result-number").text(percentage_correct+"%"),$("#time .result-number").text(Math.floor(results.duration/1e3/60<<0)+":"+pad2(Math.floor(results.duration/1e3%60))),$("#xp .result-number").text(results.correct),$("#save-button").on("click",e=>{console.log("implement save")});