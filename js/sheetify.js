$("#subjects-settings").text("["+JSON.parse(localStorage.getItem("userData")).subjects.join("], [")+"]"),$("#verbs-settings").text(JSON.parse(localStorage.getItem("userData")).verbs.join(", ")),$.getJSON("/VITE/verbs.json").done((function(e){verbs=e,""!=$("#print-tense-select").val()&&null!=$("#print-tense-select").val()&&($("#print-button, #answers-button").removeClass("disabled"),makePrint($("#print-name").text()))})).fail((function(e){console.error("error: could not load verbs.json :("),console.log(e)}));try{params&&"true"==params.get("right")&&params.has("template")&&($(document.body).addClass("right"),$("#print-name, .template-name").text(params.get("template"))),params&&params.has("tense")&&$("#print-tense-select").has(`option[value="${params.get("tense")}"]`)&&$("#print-tense-select, #tense-select").val(params.get("tense"))}catch(e){}function startApp(){return new Promise((function(e,t){e()}))}var templates=[{filters:{orientation:/portrait/,verbs:/[\s\S]*/,tense:/[\s\S]*/},author:"Sander Vonk",name:"VITE! Classic",img:"Template.svg",html:{css:"classic.css",head:'<div class="html-content" id="sheet-container"> <div id="sheet-fields"> <div id="sheet-nom" class="sheet-field"> Nom <div class="field-underline"></div></div><div id="sheet-periode" class="sheet-field"> Periode <div class="field-underline"></div></div><div id="sheet-score" class="sheet-field"> Score <div id="score-underline" class="field-underline"></div>/ %numQuestions% </div></div><div id="sheet-title">%title%</div><div id="sheet-content">',content:'<div class="question-parent"> <div class="question-subject">%q-subject%</div><div class="question-row"> <div class="question-plus">+</div><div class="question-verb">%q-verb%</div></div><div class="question-answer">%q-answer%</div></div>',foot:"</div></div>"}}];function setupTemplates(e){for(templateObj of($("#results-grid > img").remove(),$("#results-header").text(`${e.length} Template${1==e.length?"":"s"} Avaliable`),e))$("#results-grid").append(`<img src="/VITE/img/template/${templateObj.img}" title="${templateObj.name} | ${templateObj.author}" alt="${templateObj.name} by ${templateObj.author}" name="${templateObj.name}" class="template-img" />`)}function makePrint(e){let t=templates[0],s=$("#ws-questions").val(),l=$("#ws-title").val(),a=$("#print-tense-select").val();try{t=$.grep(templates,(function(t,s){return t.name==e}))[0]}catch(e){window.alert("Could not find matching template by name, got error:",e)}$("#sheet-css").attr("href","/VITE/css/templates/"+t.html.css),$("#template-print").html("[Template HTML]");let n="";for(let e=0;e<s;e++){let e={verb:random(JSON.parse(localStorage.getItem("userData")).verbs),subject:random(JSON.parse(localStorage.getItem("userData")).subjects),tense:a},s=new Question(e);n+=t.html.content.replace("%q-subject%",s.subject).replace("%q-verb%",s.verb.toLowerCase()).replace("%q-answer%",s.answer.alt)}let i=t.html.head+n+t.html.foot;i=i.replace("%title%",l).replace("%numQuestions%",s),$("#template-print").html(i)}$("#reset-filters").click(()=>{for(filter of $("select.options-item"))$(filter).children("option").removeAttr("selected"),$(filter).children("option[disabled]").attr("selected"),$(filter).val("");$("#results-filters").text("All • No Filters"),setupTemplates(templates)}),$("#settings-button").click(()=>{$("#filter-options, #settings-button").addClass("active")}),$("#options-overlay").click(()=>{$("#filter-options, #settings-button").removeClass("active")}),setupTemplates(templates),$("#filters-from").on("change input",()=>{let e=templates,t=[],s=[];for(filter of($("#filters-from select.options-item").each((e,l)=>{""!=(l=$(l)).val()&&null!=l.val()&&(t.push({property:l.attr("id").replace("-select",""),value:l.val(),valueText:$(`#filters-from option[value='${l.val()}']`).text()}),s.push($(`#filters-from option[value='${l.val()}']`).text()))}),t))e=$.grep(e,(function(e,t){return e.filters[filter.property].test(filter.value)}));$("#results-filters").text(s.join(" • ")),$("#print-tense-select").val(null!=$("#tense-select").val()?$("#tense-select").val():""),setupTemplates(e)}),$(document.body).on("click","#results-grid > *",e=>{let t=$(e.target).closest("img[name]").attr("name");$(document.body).addClass("right"),$(document.body).scrollTop(0),$("#print-name").text($(e.target).attr("name")),makePrint(t)}),$("#print-dropdowns").on("change, input",(function(){""!=$("#print-tense-select").val()&&null!=$("#print-tense-select").val()?($("#print-button, #answers-button").removeClass("disabled"),makePrint($("#print-name").text())):$("#print-button, #answers-button").addClass("disabled")})),$("#print-tense-select").change(()=>{$("#ws-title").val("Imparfait"!=$("#print-tense-select :selected").text()?"Le "+$("#print-tense-select :selected").text():"L'imparfait")});