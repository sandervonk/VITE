function startApp(){return new Promise((function(e,t){setTimeout((function(){}),2e3)}))}function getCMOptions(){let e=[{icon:"cm-class",text:"Manage Classes",onclick:'window.location.href="./";closeContextMenu();'}];return!!e.length&&e}$("#visibility-icon").click((function(){$(this).toggleClass("alt"),$("#invites").toggle(),$("#lock-icon").toggleClass("alt"),$(this).attr("private",$(this).hasClass("alt")),new Toast("Set class visibility to "+("true"==$(this).attr("private")?"private":"public"),"transparent",500,`../img/icon/info-${"true"==$(this).attr("private")?"":"un"}locked-icon.svg`)})),$("#code-row").click((function(){el=$("#join-code")[0],""==el.value?new Toast("Make sure you've created the class to get your code, then tap here again to copy it","default",2e3,"/VITE/img/icon/warning-icon.svg"):(el.focus(),el.select(),navigator.clipboard.writeText(el.value).then(e=>{console.log("Copied to clipboard"),new Toast("Copied class code to clipboard","transparent",750,"/VITE/img/icon/clipboard-icon.svg")}).catch(e=>{new ErrorToast("Could not copy class code",e.toString(),2e3),$("#join-code").removeAttr("disabled")}))})),$("#class-settings").on("input change",(function(){$("#class-name").val().length>=4?$("#create-button").removeClass("disabled"):$("#create-button").addClass("disabled")})),$("#invites-add").submit((function(e){e.preventDefault(),0==$("#invites-add > input").val().length?new Toast("Please enter a valid email address","default",2e3,"/VITE/img/icon/warning-icon.svg"):($("#invites-list > li").length>=10?new Toast("You can only invite 10 people to your class currently, sorry!","default",2e3,"/VITE/img/icon/warning-icon.svg"):$("#invites-list").has(`li[email="${$("#invites-add > input").val()}"]`).length>0?new Toast("You've already added this person","default",2e3,"/VITE/img/icon/warning-icon.svg"):($("#invites-list").append(`<li email="${$("#invites-add > input").val()}">${$("#invites-add > input").val()}</li>`),new Toast("Added class member","transparent",750,"/VITE/img/icon/success-icon.svg")),$("#invites-add > input[type='email']").val(""))})),$("#invites-list").on("click","li[email]",(function(){$(this).remove()})),$("#bottom-actions").on("click","#create-button:not(.disabled)",(function(){let e={};if(e.owner=firebase.auth().currentUser.uid,e.members=[e.owner],e.name=$("#class-name").val(),e.visibility=$("#lock-icon").hasClass("alt")?"private":"public",e.description=$("#class-description").text(),$("#lock-icon").hasClass("alt")&&(e.invited=$("#invites-list > li").map((function(){return $(this).attr("email")})).get(),0==e.invited.length))throw new Toast("You need to add at least one member to create a private class","default",2e3,"/VITE/img/icon/warning-icon.svg"),"At least 1 member needed to create a private class";console.log(e),db.collection("classes").add(e).then(e=>{var t=e.id;userDoc().update({classes:firebase.firestore.FieldValue.arrayUnion(e.id)},{merge:!0}).then(()=>{$("#join-code").val(t),$("#create-button").text("CLASS CREATED"),$("#create-button").addClass("disabled"),new Toast("Class created successfully!","default",2e3,"/VITE/img/icon/success-icon.svg",".?class="+t),setTimeout((function(){$("#code-row").click()}),750)})}).catch(e=>{console.error(e),new ErrorToast("Something went wrong creating this class",e.toString().replace("FirebaseError:","database:"),4e3)})}));