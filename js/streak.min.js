function getCalendarHTML(t,e,a){let r=function(t){return t=new Date(t),[String(t.getMonth()+1).padStart(2,"0"),String(t.getDate()).padStart(2,"0"),t.getFullYear()].join("-")},n=`<div id="streak-calendar" date="${t.toDateString()}">`,l=new Date(t.getFullYear(),t.getMonth(),1),d=new Date(t.getFullYear(),t.getMonth()+1,0),o=0,s=[[0,"empty",""],[0,"empty",""],[0,"empty",""],[0,"empty",""],[0,"empty",""],[0,"empty",""]];n+=`<div id="streak-calendar-head"> <button class="calendar-button" id="cal-month-prev"></button> <div id="streak-month">${l.toLocaleString("en-us",{month:"long"})+(l.getFullYear()==(new Date).getFullYear()?"":" <span class='cal-year'>"+l.getFullYear())+"</span>"}</div> <button class="calendar-button" id="cal-month-next"></button> </div>`,n+='<div id="streak-days">',o=l.getDay();for(let t=o;t<d.getDate()+o;t++){let n=e[r(l.setDate(1-o+t))];dayVal=n||0,s[t]=[dayVal,dayVal>=a?"streak":n>=0?"login":"none",t-o+1]}for(let t=0;t<s.length;t++){let e=Array.from(s[t]);s[t-1]&&s[t][1]==s[t-1][1]&&t%7!=0&&(e[1]+=" connect-left"),s[t+1]&&s[t][1]==s[t+1][1]&&t%7!=6&&(e[1]+=" connect-right"),n+=`<div class="calendar-day day-${e[1]}" xp="${e[0]}">${e[2]}</div>`}return n+="</div></div>",n}$(document).on("click","body:not([header-collapsed]) [streak='calendar']",t=>{$("#streak-overlay").remove(),$(document.body).append('<div id="streak-overlay" class="center">'+getCalendarHTML(new Date,JSON.parse(localStorage.getItem("userData")).xphistory,JSON.parse(localStorage.getItem("userData")).goal)+"</div>"),$("#streak-overlay").addClass("fadein"),$("#streak-calendar").addClass("fadezoomin")}),$(document.body).on("click","#streak-overlay",t=>{"streak-overlay"==t.target.id&&($("#streak-overlay").addClass("fadeout"),$("#streak-calendar").addClass("fadezoomout"))}),$(document.body).on("click",".calendar-button",t=>{let e=0;"cal-month-prev"==t.target.id?e=-1:"cal-month-next"==t.target.id&&(e=1);let a=$("#streak-calendar"),r=new Date(a.attr("date")).setMonth(new Date(a.attr("date")).getMonth()+e);a.attr("date",new Date(r).toDateString()),a.html(getCalendarHTML(new Date(a.attr("date")),JSON.parse(localStorage.getItem("userData")).xphistory,JSON.parse(localStorage.getItem("userData")).goal))});