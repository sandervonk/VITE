"use strict";let tutorialTabs={learn:{title:"The Learn Tab",description:"This tab is your go-to place for everything learning. It'll provide you access to different activities at the click or tap of a tile!"},settings:{title:"The Settings Tab",description:"Customize your learning experience here, with theme toggles, level adjustment, and more!"},announcements:{title:"The Announcements Tab",description:"Learn about new features and find more information about how you can best improve your learning experience here!"}};class tutorialObject{constructor(){this.start()}start(){$("#page-content, body").addClass("tutorial"),$(document.body).on("click","#body.tutorial .footer-item",(t=>{this.setText(t.target.id.replace("-tab",""))})),$("#tutorial-overlay-zone").click((function(){tutorialClass.next()}))}next(){let t=["learn","settings","announcements","none"],e=$(".footer-item.active")[0].id.replace("-tab",""),a=t[t.indexOf(e)+1],o=".footer-item#"+a+"-tab";"none"!=a?($(".footer-item").removeClass("active"),$(o).addClass("active"),$("#page-content, body").attr("activetab",a),this.setText(a)):"none"==a&&"true"==params.get("classPanel")?new Toast("Opening the class panel","default",750,"/VITE/img/icon/group-info-icon.svg","/VITE/class/"):"none"==a&&(window.location.href="./")}setText(t){$("#tutorial-title").text(tutorialTabs[t].title),$("#tutorial-description").text(tutorialTabs[t].description)}}let path=params.get("path");var tutorialClass;function saveSettings(t){let e={};new FormData(t).forEach((function(t,a){console.log(a),["theme"].includes(a)&&(e[a]=t)})),setupTheme(e);let a=JSON.stringify(e);userDoc().set({prefs:e},{merge:!0}),localStorage.settings=a}function setTab(t,e=!1,a=!1){let o=t.replace("-tab",""),n=$("#"+t);if($(".footer-item").removeClass("active"),$(`.footer-item#${o}-tab`).addClass("active"),$("#page-content, body").attr("activetab",o),e&&n[0].scrollIntoView({behavior:"smooth",block:"start",inline:"start"}),n.scrollTop()>0?n.animate({scrollTop:0},500,(function(){$(document.body).removeAttr("header-collapsed")})):$(document.body).removeAttr("header-collapsed"),window.history&&!a){let t=new URL(window.location.href);t.searchParams.set("tab",o),window.history.pushState({},"",t.href)}}function calcDays(t,e){return Math.round(Math.abs(e.getTime()-t.getTime())/864e5)}null!=path&&(localStorage.learningPath=path),"true"==params.get("showTutorial")?tutorialClass=new tutorialObject:"true"==params.get("classPanel")?new Toast("Opening the class panel","default",750,"/VITE/img/icon/group-info-icon.svg","/VITE/class/"):["settings","learn","announcements"].includes(params.get("tab"))&&setTab(params.get("tab")+"-tab",!0,!0),$(document.body).on("click",".footer-item",(t=>{setTab(t.target.id,!0,!1);try{tutorialClass.setText(t.target.id.replace("-tab",""))}catch(t){}})),$("#settings-tab .switch-toggle").click((t=>{saveSettings($("#settings-form")[0])})),$(".learn-card").click((t=>{window.location.href=$(t.target).closest(".learn-card").attr("page")+"?type="+$(t.target).closest(".learn-card").attr("name")})),$("#tab-container").scroll((t=>{setTab(["learn-tab","settings-tab","announcements-tab"][Math.round($("#tab-container").scrollLeft()/$("#tab-container").width())])}));try{$(".announcement-date").each(((t,e)=>{let a=calcDays(new Date,new Date($(e).text()));$(e).text(a+(1==a?" day":" days")+" ago")}))}catch(t){}$((function(){var t=0;$(".tab").scroll((function(){var e=$(this).scrollTop(),a=$(this)[0].scrollHeight-$(this).outerHeight();Math.abs(e-t)>=40&&e>50?(e>t?($(document.body).attr("header-collapsed",""),$("#account-menu").addClass("collapsed")):e<a-2&&$(document.body).removeAttr("header-collapsed"),t=e):0==e&&($(document.body).removeAttr("header-collapsed"),t=e)}))})),$(document).on("click","body[header-collapsed] header",(t=>{$(".tab").animate({scrollTop:0},500,(function(){$(document.body).removeAttr("header-collapsed")}))}));
